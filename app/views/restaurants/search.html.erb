<%= render 'restaurants/searchbar'%>

<div class="container" style="margin-top: 50px;">
  <div class="row">
    <div class="col-md-3">
      <div class="panel panel-default">
        <div class="panel-heading" style="background: #CF2228; color: #fff;">
          <h3 class="panel-title">Filters</h3>
        </div>
        <div class="panel-body">
          <p>Sort by</p>
          <ul class="list-unstyled filters">
            <li class="<%= filter_active_class(restaurant_search_path(searchQuery: @searchQuery, price_range: (@price_range.nil? ? nil : @price_range )), @main_active)%>"><%= link_to "Ratings - <small>High to low</small>".html_safe, restaurant_search_path(searchQuery: @searchQuery, price_range: (@price_range.nil? ? nil : @price_range )) %></li>
            <li class="<%= filter_active_class(restaurant_search_path(searchQuery: @searchQuery, sort: 'name', price_range: (@price_range.nil? ? nil : @price_range ))) %>"><%= link_to "Name - <small>Alphabetical Order</small>".html_safe, restaurant_search_path(searchQuery: @searchQuery, sort: 'name', price_range: (@price_range.nil? ? nil : @price_range )) %></li>
            <li class="<%= filter_active_class(restaurant_search_path(searchQuery: @searchQuery, sort: 'price_low_to_high', price_range: (@price_range.nil? ? nil : @price_range ))) %>"><%= link_to "Price - <small>Low to high</small>".html_safe, restaurant_search_path(searchQuery: @searchQuery, sort: 'price_low_to_high', price_range: (@price_range.nil? ? nil : @price_range )) %></li>
            <li class="<%= filter_active_class(restaurant_search_path(searchQuery: @searchQuery, sort: 'price_high_to_low', price_range: (@price_range.nil? ? nil : @price_range ))) %>"><%= link_to "Price - <small>High to low</small>".html_safe, restaurant_search_path(searchQuery: @searchQuery, sort: 'price_high_to_low', price_range: (@price_range.nil? ? nil : @price_range )) %></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-md-9 search_result">
      <% unless @result.blank? %>
        <div class="list-group restos">
          <% @result.each do |resto| %>
            <div class="col-md-12 col-xs-12 col-lg-12 col-sm-12 hvr-grow">
              <%= link_to resto, class: "list-group-item", style: "margin-bottom: 10px; height: 185px; padding: 0px;" do %>
                <div class="row">
                  <div class="col-lg-3 col-md-4 col-sm-4 col-xs-5">
                    <div class="clearfix" style="background-image: url('<%= asset_path(display_resto(resto))%>'); background-repeat: repeat; height: 185px; width: 96%; background-position: center;"></div>
                  </div>
                  <div class="col-lg-9 col-md-8 col-sm-8 col-xs-7" style="padding: 20px; margin-top: -10px;">
                    <div class="pull-left">
                      <h3 class="list-group-item-heading"><%= resto.name %></h3>
                      <p style="font-size: 12px;">
                        <% (resto.ave_ratings.to_i).times do %>
                          <%= icon('star') %>
                        <% end %>
                        <% unless resto.ave_ratings % 1 == 0 %>
                          <%= icon('star-half-o')%>
                          <% (4 - resto.ave_ratings.to_i).times do %>
                            <%= icon('star-o') %>
                          <% end %>
                        <% else %>
                          <% (5 - resto.ave_ratings.to_i).times do %>
                            <%= icon('star-o') %>
                          <% end %>
                        <% end %>
                        &nbsp;&nbsp;(<%= pluralize(resto.ratings.count, 'review') %>)
                      </p>
                      <p class="list-group-item-text"><%= resto.description %></p>
                      <p class="list-group-item-text" style="margin-top: 20px;"><%= icon('map-marker', resto.address, style: 'margin-right: 12px;') %></p>
                      <p class="list-group-item-text" style="margin-top: 10px;"><%= icon('phone', resto.contact, style: 'margin-right: 10px;') %></p>
                      
                       <p class="list-group-item-text" style="margin-top: 10px;">
                          <%= resto.is_open? %>
                       </p>
                      
                    </div>

                  </div>
                </div>
              <% end %>
            </div>
            
          <% end %>
        </div>
      <% else %>
        <h3 class="text-center">No Results Found!</h3>
        <%= link_to "See all restaurants", restaurant_search_path(searchQuery: ""), class: 'btn btn-primary center-block', style: 'width: 200px;' %>
        <h4 class="text-center"></h4>
      <% end %>
    </div>
  </div>
  
  
  
</div>


